CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
IF(COMMAND CMAKE_POLICY)
	CMAKE_POLICY(SET CMP0003 OLD)
ENDIF(COMMAND CMAKE_POLICY)

PROJECT( nn )

SET(CMAKE_BUILD_TYPE "Debug")
SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_SOURCE_DIR})
SET(CMAKE_INSTALL_PREFIX ${PROJECT_SOURCE_DIR} CACHE INTERNAL "Prefix prepended to install directories" FORCE)

FIND_PACKAGE(Eigen3 REQUIRED)
FIND_PACKAGE(GTest)

INCLUDE_DIRECTORIES(${EIGEN3_INCLUDE_DIR})

ADD_LIBRARY(nn nn.cpp)

# ----- Testing -----
IF (GTEST_FOUND)
  ENABLE_TESTING()
  INCLUDE_DIRECTORIES(${GTEST_INCLUDE_DIR})
  ADD_EXECUTABLE(nn_test nn_test.cpp)
  TARGET_LINK_LIBRARIES(nn_test nn ${GTEST_LIBRARIES} ${GTEST_MAIN_LIBRARIES})
  ADD_TEST(nn_test nn_test)
ENDIF ()
